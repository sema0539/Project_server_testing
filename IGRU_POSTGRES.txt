DROP TABLE organizations;
CREATE TABLE IF NOT EXISTS organizations(
  organization_id SERIAL PRIMARY KEY,
  org_name VARCHAR(50),
  contact VARCHAR(50),
  upcoming_events INT[]
);


DROP TABLE events;
CREATE TABLE IF NOT EXISTS events (
  event_id SERIAL PRIMARY KEY,
  event_title VARCHAR(50),
  start_date_time TIMESTAMP NOT NULL,
  location VARCHAR(50),
  FOREIGN KEY (contact) REFERENCES organizations(contact),
  attribute SMALLINT,
  max_size SMALLINT,
  FOREIGN KEY (organization_id) REFERENCES organizations(organization_id),
  current_attending SMALLINT DEFAULT 0,
  description TEXT
);

DROP TABLE archives;
CREATE TABLE IF NOT EXISTS archives (
  archive_id SERIAL PRIMARY KEY,
  FOREIGN KEY (event_id) REFERENCES events(event_id),
  last_update TIMESTAMP
);

DROP TABLE users;
CREATE TABLE IF NOT EXISTS users (
  user_id SERIAL PRIMARY KEY,
  user_email VARCHAR(50),
  first_name VARCHAR(50),
  last_name VARCHAR(50),
  password VARCHAR(30)
);

DROP TABLE saved_events;
CREATE TABLE IF NOT EXISTS saved_events (
  FOREIGN KEY (user_id) REFERENCES users(user_id),
  FOREIGN KEY (event_id) REFERENCES events(event_id),
  PRIMARY KEY (user_id, event_id),
  timesaved TIMESTAMP
);

INSERT INTO events(event_title, start_date_time, location, contact, attribute, max_size, organization_id, current_attending, description)
VALUES('EWB Nepal Presentation', '2020-04-25 12:00:00', 'Virtual Zoom', 'ewb.colorado@gmail.com', 1, 200, 1, 50, 'Learn about EWB Nepal!'),
VALUES('Leeds Consulting Group', '2020-04-27 15:00:00', 'Virtual Hangouts', 'leedsconsultinggroup@colorado.edu', 1, 200, 1, 50, 'Learn about LCG!')
;
